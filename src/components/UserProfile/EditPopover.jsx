import {
    Popover,
    PopoverTrigger,
    PopoverContent,
    PopoverBody,
    Portal,
    IconButton,
    Button,
    Flex,
    Text
} from '@chakra-ui/react'
import { useNavigate } from 'react-router-dom'
const CustomButtom = ({title,icon, props, onClick})=>{
    return (
    <Button
        variant={'ghost'}  
        _hover={{ backgroundColor: 'transparent' }}
        _active={{ backgroundColor: 'transparent' }}
        textAlign={'start'}
        {...props}
        onClick={onClick}
    >
        <Flex
            justifyContent={'flex-start'}
            gap={4}
            width={'100%'}
        >
            {icon}
            <Text>
            {title}
            </Text>
        </Flex>
    </Button>
    )
}
export default function EditPopover({handleArchive, userData}) {
    const navigate = useNavigate();
    const handleEdit = ()=>{
        const organisationId = userData.organisationId;
        const userId = userData.id;
        navigate(`/organisation/${organisationId}/user-profile/${userId}/edit-profile`, {state:userData})
    }

    return (
        <Popover>
            <PopoverTrigger>
                <IconButton
                    variant={'ghost'}
                    textDecoration={'underline'}
                    _hover={{ backgroundColor: 'transparent' }}
                    _active={{ backgroundColor: 'transparent' }}
                    icon={<svg xmlns="http://www.w3.org/2000/svg" width="18" height="4" viewBox="0 0 18 4" fill="none">
                        <path d="M9 0C8.60444 0 8.21776 0.117298 7.88886 0.337061C7.55996 0.556824 7.30362 0.869181 7.15224 1.23463C7.00087 1.60009 6.96126 2.00222 7.03843 2.39018C7.1156 2.77814 7.30608 3.13451 7.58579 3.41421C7.86549 3.69392 8.22186 3.8844 8.60982 3.96157C8.99778 4.03874 9.39992 3.99913 9.76537 3.84776C10.1308 3.69638 10.4432 3.44004 10.6629 3.11114C10.8827 2.78224 11 2.39556 11 2C11 1.46957 10.7893 0.96086 10.4142 0.585787C10.0391 0.210714 9.53043 0 9 0ZM2 0C1.60444 0 1.21776 0.117298 0.88886 0.337061C0.559962 0.556824 0.303617 0.869181 0.152242 1.23463C0.000866562 1.60009 -0.0387401 2.00222 0.0384303 2.39018C0.115601 2.77814 0.306082 3.13451 0.585787 3.41421C0.865492 3.69392 1.22186 3.8844 1.60982 3.96157C1.99778 4.03874 2.39992 3.99913 2.76537 3.84776C3.13082 3.69638 3.44318 3.44004 3.66294 3.11114C3.8827 2.78224 4 2.39556 4 2C4 1.46957 3.78929 0.96086 3.41421 0.585787C3.03914 0.210714 2.53043 0 2 0ZM16 0C15.6044 0 15.2178 0.117298 14.8889 0.337061C14.56 0.556824 14.3036 0.869181 14.1522 1.23463C14.0009 1.60009 13.9613 2.00222 14.0384 2.39018C14.1156 2.77814 14.3061 3.13451 14.5858 3.41421C14.8655 3.69392 15.2219 3.8844 15.6098 3.96157C15.9978 4.03874 16.3999 3.99913 16.7654 3.84776C17.1308 3.69638 17.4432 3.44004 17.6629 3.11114C17.8827 2.78224 18 2.39556 18 2C18 1.46957 17.7893 0.96086 17.4142 0.585787C17.0391 0.210714 16.5304 0 16 0Z" fill="#914FEB" />
                    </svg>}
                >
                    Edit
                </IconButton>
            </PopoverTrigger>
            <Portal>
                <PopoverContent
                    w={'200px'}
                    right={'20px'}
                >
                    <PopoverBody
                        display={'flex'}
                        flexDirection={'column'}
                        textAlign={'start'}
                       
                    >
                        <CustomButtom 
                            title={'Edit'} 
                            icon={<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M4.16602 14.9998H7.69935C7.80902 15.0004 7.91774 14.9794 8.01927 14.9379C8.1208 14.8965 8.21315 14.8354 8.29102 14.7581L14.0577 8.98312L16.4243 6.66645C16.5025 6.58898 16.5645 6.49682 16.6068 6.39527C16.6491 6.29372 16.6708 6.1848 16.6708 6.07479C16.6708 5.96478 16.6491 5.85586 16.6068 5.75431C16.5645 5.65276 16.5025 5.56059 16.4243 5.48312L12.891 1.90812C12.8135 1.83001 12.7214 1.76802 12.6198 1.72571C12.5183 1.6834 12.4094 1.66162 12.2993 1.66162C12.1893 1.66162 12.0804 1.6834 11.9789 1.72571C11.8773 1.76802 11.7852 1.83001 11.7077 1.90812L9.35768 4.26645L3.57435 10.0415C3.49711 10.1193 3.43601 10.2117 3.39454 10.3132C3.35307 10.4147 3.33205 10.5234 3.33268 10.6331V14.1665C3.33268 14.3875 3.42048 14.5994 3.57676 14.7557C3.73304 14.912 3.945 14.9998 4.16602 14.9998ZM12.2993 3.67479L14.6577 6.03312L13.4743 7.21645L11.116 4.85812L12.2993 3.67479ZM4.99935 10.9748L9.94102 6.03312L12.2993 8.39145L7.35768 13.3331H4.99935V10.9748ZM17.4993 16.6665H2.49935C2.27834 16.6665 2.06637 16.7543 1.91009 16.9105C1.75381 17.0668 1.66602 17.2788 1.66602 17.4998C1.66602 17.7208 1.75381 17.9328 1.91009 18.089C2.06637 18.2453 2.27834 18.3331 2.49935 18.3331H17.4993C17.7204 18.3331 17.9323 18.2453 18.0886 18.089C18.2449 17.9328 18.3327 17.7208 18.3327 17.4998C18.3327 17.2788 18.2449 17.0668 18.0886 16.9105C17.9323 16.7543 17.7204 16.6665 17.4993 16.6665Z" fill="#9A9AB0"/>
                          </svg>}
                          onClick={()=>handleEdit()}
                        />
                        <CustomButtom 
                            title={userData.isArchived?'Unarchive':'Archive'}
                            onClick={()=>handleArchive()}
                            icon={<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M11.0743 11.4918L10.8327 11.7418V9.58351C10.8327 9.3625 10.7449 9.15054 10.5886 8.99426C10.4323 8.83798 10.2204 8.75018 9.99935 8.75018C9.77833 8.75018 9.56637 8.83798 9.41009 8.99426C9.25381 9.15054 9.16602 9.3625 9.16602 9.58351V11.7418L8.92435 11.4918C8.76743 11.3349 8.5546 11.2468 8.33268 11.2468C8.11076 11.2468 7.89794 11.3349 7.74102 11.4918C7.5841 11.6488 7.49594 11.8616 7.49594 12.0835C7.49594 12.3054 7.5841 12.5183 7.74102 12.6752L9.40768 14.3418C9.48694 14.4177 9.58039 14.4772 9.68268 14.5168C9.78243 14.5609 9.89029 14.5837 9.99935 14.5837C10.1084 14.5837 10.2163 14.5609 10.316 14.5168C10.4183 14.4772 10.5118 14.4177 10.591 14.3418L12.2577 12.6752C12.4146 12.5183 12.5028 12.3054 12.5028 12.0835C12.5028 11.8616 12.4146 11.6488 12.2577 11.4918C12.1008 11.3349 11.8879 11.2468 11.666 11.2468C11.4441 11.2468 11.2313 11.3349 11.0743 11.4918ZM15.8327 4.58351H10.5993L10.3327 3.75018C10.1598 3.26121 9.83914 2.8381 9.4151 2.53948C8.99106 2.24086 8.48465 2.08152 7.96602 2.08351H4.16602C3.50297 2.08351 2.86709 2.34691 2.39825 2.81575C1.92941 3.28459 1.66602 3.92047 1.66602 4.58351V15.4168C1.66602 16.0799 1.92941 16.7158 2.39825 17.1846C2.86709 17.6535 3.50297 17.9168 4.16602 17.9168H15.8327C16.4957 17.9168 17.1316 17.6535 17.6004 17.1846C18.0693 16.7158 18.3327 16.0799 18.3327 15.4168V7.08351C18.3327 6.42047 18.0693 5.78459 17.6004 5.31575C17.1316 4.84691 16.4957 4.58351 15.8327 4.58351ZM16.666 15.4168C16.666 15.6379 16.5782 15.8498 16.4219 16.0061C16.2657 16.1624 16.0537 16.2502 15.8327 16.2502H4.16602C3.945 16.2502 3.73304 16.1624 3.57676 16.0061C3.42048 15.8498 3.33268 15.6379 3.33268 15.4168V4.58351C3.33268 4.3625 3.42048 4.15054 3.57676 3.99426C3.73304 3.83798 3.945 3.75018 4.16602 3.75018H7.96602C8.14072 3.74973 8.31114 3.8042 8.45321 3.90588C8.59527 4.00757 8.70178 4.15133 8.75768 4.31685L9.20768 5.68351C9.26359 5.84903 9.3701 5.99279 9.51216 6.09448C9.65422 6.19617 9.82465 6.25063 9.99935 6.25018H15.8327C16.0537 6.25018 16.2657 6.33798 16.4219 6.49426C16.5782 6.65054 16.666 6.8625 16.666 7.08351V15.4168Z" fill="#9A9AB0"/>
                          </svg>} 
                        />
                    </PopoverBody>
                </PopoverContent>
            </Portal>
        </Popover>
    )
}
